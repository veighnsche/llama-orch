[workspace]
members = [
    "contracts/api-types",
    "contracts/config-schema",

    "bin/orchestratord",
    "bin/orchestratord/bdd",
    "bin/pool-managerd",
    "bin/pool-managerd/bdd",
    "bin/worker-orcd",
    "bin/worker-orcd/bdd",
    
    # Test harnesses
    "test-harness/e2e-haiku",
    "test-harness/metrics-contract",
    "test-harness/determinism-suite",
    "test-harness/chaos",
    "test-harness/bdd",

    # Consumers
    "consumers/llama-orch-sdk",
    "consumers/llama-orch-utils",

    # Tools
    "tools/spec-extract",
    "tools/openapi-client",
    "tools/readme-index",
    "xtask",
    
    # New bin/ crates - shared-crates
    "bin/shared-crates/secrets-management",
    "bin/shared-crates/input-validation",
    "bin/shared-crates/audit-logging",
    "bin/shared-crates/rate-limiting",
    "bin/shared-crates/circuit-breaker",
    "bin/shared-crates/deadline-propagation",
    "bin/shared-crates/retry-policy",
    "bin/shared-crates/resource-limits",
    "bin/shared-crates/pool-registry-types",
    "bin/shared-crates/auth-min",
    "bin/shared-crates/narration-core",
    
    # New bin/ crates - orchestratord-crates
    "bin/orchestratord-crates/orchestrator-core",
    "bin/orchestratord-crates/orchestrator-core/bdd",
    "bin/orchestratord-crates/backpressure",
    "bin/orchestratord-crates/placement",
    "bin/orchestratord-crates/streaming",
    "bin/orchestratord-crates/task-cancellation",
    "bin/orchestratord-crates/platform-api",
    "bin/orchestratord-crates/agentic-api",
    "bin/orchestratord-crates/job-timeout",
    "bin/orchestratord-crates/node-registry",
    
    # New bin/ crates - pool-managerd-crates
    "bin/pool-managerd-crates/pool-registry",
    "bin/pool-managerd-crates/health-monitor",
    "bin/pool-managerd-crates/lifecycle",
    "bin/pool-managerd-crates/api",
    "bin/pool-managerd-crates/model-catalog",
    "bin/pool-managerd-crates/model-catalog/bdd",
    "bin/pool-managerd-crates/model-provisioner",
    "bin/pool-managerd-crates/model-provisioner/bdd",
    "bin/pool-managerd-crates/model-cache",
    "bin/pool-managerd-crates/model-eviction",
    "bin/pool-managerd-crates/error-recovery",
    "bin/pool-managerd-crates/router",
    "bin/pool-managerd-crates/node-registration-client",
    
    # New bin/ crates - worker-orcd-crates
    "bin/worker-orcd-crates/vram-residency",
    "bin/worker-orcd-crates/model-loader",
    "bin/worker-orcd-crates/inference",
    "bin/worker-orcd-crates/api",
    "bin/worker-orcd-crates/error-handler",
    "bin/worker-orcd-crates/execution-planner", "bin/worker-orcd-crates/capability-matcher",
]

resolver = "2"

[workspace.package]
version = "0.0.0"
edition = "2021"
license = "GPL-3.0-or-later"
authors = ["llama-orch contributors"]

[workspace.dependencies]
anyhow = "1"
thiserror = "1"
serde = { version = "1", features = ["derive"] }
serde_json = "1"
serde_yaml = "0.9"
schemars = { version = "0.8", features = ["either"] }
axum = { version = "0.7", features = ["macros", "json"] }
tokio = { version = "1", features = ["full"] }
tracing = "0.1"
tracing-subscriber = { version = "0.3", features = ["fmt", "env-filter", "json"] }
reqwest = { version = "0.12", default-features = false, features = ["json", "rustls-tls"] }
futures = "0.3"
http = "1"
hyper = { version = "1", features = ["http1", "http2", "server", "client"] }
bytes = "1"
uuid = { version = "1", features = ["serde", "v4"] }
clap = { version = "4", features = ["derive"] }
sha2 = "0.10"
walkdir = "2"
regex = "1"
insta = { version = "1", features = ["yaml"] }
proptest = "1"
wiremock = "0.6"
openapiv3 = "1"
jsonschema = "0.17"
once_cell = "1"
chrono = { version = "0.4", features = ["serde"] }
