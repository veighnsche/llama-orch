# Contract Test Proof Bundle Template

Required generated artifacts

- contract_fixtures.md — list of fixtures (e.g., SSE frame schemas, pact endpoints)
- sse_fixtures.ndjson — canonical sample token stream frames
- error_mapping_table.md — upstream → internal error taxonomy rows
- drift_report.md — optional schema/pact drift notes
- test_report.md — summary

Notes

- Keep fixtures stable and versioned; link to spec IDs.

Path layout

- <crate>/.proof_bundle/contract/<run_id>/
- run_id should be `YYYYMMDD-HHMMSS-<git_sha8>` or set `LLORCH_RUN_ID`.

Environment

- LLORCH_RUN_ID — optional, groups artifacts per run
- LLORCH_PROOF_DIR — optional, overrides base bundle dir (defaults to `<crate>/.proof_bundle`)

Formats

- Use NDJSON for streaming fixtures (SSE), JSON/Markdown for tables and drift notes

Autogenerated header (required)

- Markdown/plain-text: first line MUST be `# AUTOGENERATED: Proof Bundle`.
- NDJSON: first record SHOULD be `{ "_meta": "proof_bundle", "_note": "autogenerated" }`.
- JSON: prefer sibling `<name>.meta` file with the header line; embedding `{ "generated_by": "proof-bundle" }` is acceptable.

Guidance

- For SSE fixtures, emit exactly the frames the server produces in order (one JSON per line) under `sse_fixtures.ndjson`.
- For error mappings, include columns: `upstream_code`, `upstream_message`, `internal_category`, `http_status`, `spec_id`.

Links

- See `.docs/testing/types/contract.md` and `.docs/testing/TEST_TYPES_GUIDE.md`.
