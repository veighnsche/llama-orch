# http-util — Contract Tests (v0)

Status: Draft
Owner: @llama-orch-maintainers
Date: 2025-09-19

## Scope

- If provider verification applies (e.g., common adapter framing), document contract fixtures here.

## Proof Bundle Outputs (MUST)

Use the support crate `libs/proof-bundle` and follow `.docs/testing/TEST_TYPES_GUIDE.md` and `libs/proof-bundle/.specs/00_proof-bundle.md` (PB‑1001..PB‑1012):

- Base path: `<crate>/.proof_bundle/contract/<run_id>/` (PB‑1001..PB‑1003). Respect `LLORCH_RUN_ID` and `LLORCH_PROOF_DIR`.
- Autogenerated header (PB‑1012):
  - Markdown/CSV/text: first line MUST be `# AUTOGENERATED: Proof Bundle`.
  - NDJSON: first record SHOULD be `{ "_meta": "proof_bundle", "_note": "autogenerated" }`.
  - JSON: write sibling `<name>.meta` or embed `{ "generated_by": "proof-bundle" }`.

Contract tests MUST generate the following artifacts:
- `contract_fixtures.md` — list and brief description of fixtures provided (e.g., SSE token frame shapes)
- `sse_fixtures.ndjson` — canonical sample frames for token streaming that adapters can reuse
- `error_mapping_table.md` — upstream → `WorkerError` example rows aligned with `./40_ERROR_MESSAGING.md`
- `test_report.md` — brief summary and pointers

## Refinement Opportunities

- Shared fixtures for SSE chunk decoding across adapters.
