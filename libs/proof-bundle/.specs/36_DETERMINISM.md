# Proof-Bundle — Determinism Suite (36_DETERMINISM)

Status: Draft
Owner: @llama-orch-maintainers
Date: 2025-09-26

## Scope
Determinism tests validate byte/token-identical outputs across replicas/engines. This is an engine/orchestrator concern and not applicable at the `proof-bundle` crate scope. However, the determinism harness consumes this crate to write proof bundles.

## Expectations When Used by Determinism Harness
- Use `ProofBundle::for_type(TestType::Determinism)` to open `determinism/<run_id>/`.
- Emit:
  - `pairs/` — streams as NDJSON pairs
  - `diffs/` — computed diffs (JSON or text)
  - `run_config.json` — include engine_version, sampler_profile_version, model_digest, seeds
- Enforce headers per PB-1012 automatically:
  - NDJSON: first metadata record (use `append_ndjson_autogen_meta`)
  - Markdown: start with `# AUTOGENERATED: Proof Bundle` (use `write_markdown_with_header`)
  - JSON: include sibling `.meta` (use `write_json_with_meta`)
- Respect envs `LLORCH_PROOF_DIR` and `LLORCH_RUN_ID`.

## Non-Goals
- No determinism tests are authored inside this crate.

## Links
- Central type guide: `/.docs/testing/types/determinism.md`
- Template: `/.proof_bundle/templates/determinism/README.md`
- Spec: `/.specs/00_proof-bundle.md` (PB-1012)
- Contracts: `/.specs/10_contracts.md`
