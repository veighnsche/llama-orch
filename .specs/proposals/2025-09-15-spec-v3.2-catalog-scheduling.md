# Home Profile Enhancements — Catalog, Reloads, Placement

Status: draft · Date: 2025-09-18

## Problem

The baseline home profile still needs:
- Durable catalog storage with verification warnings instead of hard failures.
- Clear lifecycle transitions (`Active`/`Retired`) applied through control-plane endpoints.
- Mixed-GPU placement heuristics codified in specs/contracts/tests.

## Proposed Changes

1. **Catalog & Trust Refresh**
   - Document local storage layout (sqlite or filesystem) and verification workflow that logs warnings for unsigned artifacts.
   - Ensure catalog state transitions update pool readiness and metrics consistently.
   - Specs: ORCH-3031, ORCH-3037, ORCH-3038, ORCH-3097..3098.

2. **Lifecycle Simplification**
   - Limit lifecycle states to `Active` and `Retired` (deprecating Draft/Canary terminology everywhere).
   - Update OpenAPI examples, config schema, and provider tests accordingly.

3. **Placement Heuristic Spec**
   - Codify least-loaded GPU selection with VRAM awareness and queue metadata updates (`queue_position`, `predicted_start_ms`).
   - Update determinism and BDD suites to exercise mixed RTX 3090 + 3060 scheduling.

## Impacted Artifacts

- `.specs/00_llama-orch.md` (sections on catalog, lifecycle, placement)
- `.specs/20-orchestratord.md` (control-plane behaviour, SSE payloads)
- `contracts/openapi/control.yaml` & `contracts/openapi/data.yaml`
- `contracts/config-schema/src/lib.rs`
- `test-harness/bdd/tests/features/control_plane/*.feature`
- Metrics contract (`ci/metrics.lint.json`, `.specs/metrics/otel-prom.md`)

## Acceptance Criteria

- Spec overlays updated; requirement IDs referenced by docs/tests.
- OpenAPI + config schema regenerated without drift.
- Provider verification covers catalog warning paths and lifecycle transitions.
- BDD features demonstrate mixed-GPU scheduling and catalog reloads.
- Metrics and SSE frames expose queue metadata and placement decisions.

## Notes

This proposal replaces the old “v3.2 catalog & scheduling” document that referenced fairness, WFQ, and multi-tenant quotas. Those concepts no longer apply to the home profile.
