# Proof Bundle Directory

This directory contains proof bundles generated by the llorch-cpud test suite.

## Structure

```
.proof_bundle/
├── checkpoint_01/           # Checkpoint 1: LayerNorm validation
│   └── <run_id>/
│       └── checkpoint_01_validation.md
├── determinism/             # Determinism proofs
│   └── checkpoint_01_layer_norm/
│       └── determinism_proof.md
└── README.md               # This file
```

## Run ID Format

Each test run generates a unique run ID in the format: `YYYYMMDD_HHMMSS`

Example: `20251008_124120` = 2025-10-08 at 12:41:20

## Environment Variables

- **`LLORCH_RUN_ID`**: Override the auto-generated run ID
- **`LLORCH_PROOF_DIR`**: Override the base proof bundle directory (default: `.proof_bundle`)

## Generated Files

### Checkpoint 01 Validation

**File:** `checkpoint_01/<run_id>/checkpoint_01_validation.md`

**Generated by:** `cargo test --test isolated_checkpoint_01 test_isolated_checkpoint_01_all`

**Contents:**
- Test configuration (input/output shapes, LayerNorm params)
- Input and output samples
- Statistical analysis (mean, std dev, variance, min/max per row)
- Validation checks (determinism, finite values, reasonable range)
- Reference validation results (Candle, Mistral.rs)
- Conclusion and status

### Determinism Proof

**File:** `determinism/checkpoint_01_layer_norm/determinism_proof.md`

**Generated by:** `cargo test --test checkpoint_01_determinism`

**Contents:**
- 100-run determinism validation
- Hash verification
- Sample values from each run
- Proof that implementation is bit-exact across runs

## Usage

### Run Tests and Generate Proofs

```bash
# Generate checkpoint 01 validation proof
cargo test --test isolated_checkpoint_01 test_isolated_checkpoint_01_all -- --nocapture

# Generate determinism proof
cargo test --test checkpoint_01_determinism -- --nocapture
```

### View Latest Proof

```bash
# Find latest checkpoint 01 proof
find .proof_bundle/checkpoint_01 -name "*.md" -type f | sort | tail -1 | xargs cat

# Or use a specific run ID
cat .proof_bundle/checkpoint_01/20251008_124120/checkpoint_01_validation.md
```

### Custom Run ID

```bash
# Use custom run ID for tracking
LLORCH_RUN_ID=my_custom_run cargo test --test isolated_checkpoint_01 test_isolated_checkpoint_01_all
```

## Proof Bundle Standard

This follows the monorepo proof bundle standard defined in:
- `libs/proof-bundle` - Shared Rust crate for proof bundle emission
- `.docs/testing/` - Testing specifications and guidelines

### Requirements

- **Autogenerated Headers:** All proof files include generation timestamp and test name
- **Structured Output:** Markdown format with clear sections
- **Run ID Tracking:** Each run is uniquely identified
- **Environment Respect:** Honors `LLORCH_RUN_ID` and `LLORCH_PROOF_DIR`

## Validation Results

### Checkpoint 01: LayerNorm

✅ **Status:** VALIDATED

- **Determinism:** Bit-exact across runs
- **Candle Reference:** Max diff 6.6e-06 (tolerance 1e-4)
- **Mistral.rs Reference:** Max diff 6.6e-06 (tolerance 1e-4)
- **Statistical Properties:** Mean ≈ 0, Std ≈ 1 per row
- **Conclusion:** Production-ready

See the latest proof bundle for detailed results.

---

*Generated by llorch-cpud test suite*
