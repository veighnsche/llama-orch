# Determinism Suite — Guide and Proof Bundle
## What
Compare token streams across replicas/engines to ensure identical outputs for identical inputs.
## Where
- `test-harness/determinism-suite/`.
- : `<crate>/.proof_bundle/determinism/<run_id>/` for crates involved in orchestration; harness may also emit under its own crate.
## When
- Engine upgrades, sampler/profile changes, adapter changes.
## Env
- `REQUIRE_REAL_LLAMA=1` (enforce real model)
- `LLORCH_RUN_ID` (recommended)
## Artifacts (see template)
- `pairs/` — pairs of token streams
- `diffs/` — computed diffs
- `run_config.json` — engine_version, sampler_profile_version, model_digest, seeds
- `timing.csv` (optional) — per-token latency
- `test_report.md`
## Autogenerated header
- Markdown/plain-text artifacts MUST start with `# AUTOGENERATED: Proof Bundle`.
- For NDJSON, prefer a first metadata record `{ "_meta": "proof_bundle", "_note": "autogenerated" }`.
- For JSON, use a sibling `.meta` file or embed `{ "generated_by": "" }`.
## Recipe
- Fix seeds and sampler config.
- Run across N replicas; collect streams; compute byte/token diffs.
## Links
- Template: `.proof_bundle/templates/determinism/README.md`
- Index: `.docs/testing/TEST_TYPES_GUIDE.md`
